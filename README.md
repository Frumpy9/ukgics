# work-schedule-ics 📅

Convert your UKG / Kronos **My Schedule** page into a clean iCalendar file in one click.

> **VIBE‑CODED** – generated by AI.  No warranty.  Test before trusting.

---

## What it does

- Scans the schedule page for **future** shifts.
- Generates a standards‑compliant `.ics` file (named `work_schedule.ics`).
- Variant A: just downloads the file.
- Variant B: downloads the file **and** opens Google Calendar’s import page.

---

## Installing the bookmarklet

1. **Create a new bookmark** in your browser’s bookmarks bar.
2. Copy one of the single‑line snippets below.
3. Paste it into the bookmark’s **URL / Location** field and save.

That’s it—open your schedule, click the bookmark, and the file downloads.

---

### ▶️ Plain download

```javascript
javascript:(function(){const EVENT_TITLE='Work',FILE_NAME='work_schedule';const pad=n=>String(n).padStart(2,'0'),utc=d=>`${d.getUTCFullYear()}${pad(d.getUTCMonth()+1)}${pad(d.getUTCDate())}T${pad(d.getUTCHours())}${pad(d.getUTCMinutes())}00Z`;const lines=['BEGIN:VCALENDAR','VERSION:2.0','CALSCALE:GREGORIAN','PRODID:-//work-schedule-ics//EN'];document.querySelectorAll('li[id^="myschedule-day_"]').forEach(li=>{const row=li.querySelector('.listEntity');if(!row||row.classList.contains('isToday'))return;const dt=row.querySelector('time')?.getAttribute('datetime');if(!dt)return;const day=new Date(dt);if(day<new Date())return;li.querySelectorAll('time.label').forEach(lbl=>{const m=lbl.textContent.match(/(\d{1,2}:\d{2} [AP]M)-(\d{1,2}:\d{2} [AP]M)/);if(!m)return;const[s,e]=m.slice(1),start=new Date(`${day.toDateString()} ${s}`),end=new Date(`${day.toDateString()} ${e}`);lines.push('BEGIN:VEVENT',`UID:${Date.now()}-${Math.random().toString(36).slice(2)}@local`,`DTSTAMP:${utc(new Date())}`,`SUMMARY:${EVENT_TITLE}`,`DESCRIPTION:${lbl.textContent.trim().replace(/,/g,'\\,')}`,`DTSTART:${utc(start)}`,`DTEND:${utc(end)}`,'END:VEVENT');});});if(lines.length===4){alert('No upcoming shifts found.');return;}lines.push('END:VCALENDAR');const blob=new Blob([lines.join('\r\n')+'\r\n'],{type:'text/calendar;charset=utf-8'}),a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download=`${FILE_NAME}.ics`;a.click();})();
```

---

### ▶️ Download **and** open Google Calendar › Import

```javascript
javascript:(function(){const CAL_REDIRECT='https://calendar.google.com/calendar/u/0/r/settings/export',EVENT_TITLE='Work',FILE_NAME='work_schedule';const pad=n=>String(n).padStart(2,'0'),utc=d=>`${d.getUTCFullYear()}${pad(d.getUTCMonth()+1)}${pad(d.getUTCDate())}T${pad(d.getUTCHours())}${pad(d.getUTCMinutes())}00Z`;const lines=['BEGIN:VCALENDAR','VERSION:2.0','CALSCALE:GREGORIAN','PRODID:-//work-schedule-ics//EN'];document.querySelectorAll('li[id^="myschedule-day_"]').forEach(li=>{const row=li.querySelector('.listEntity');if(!row||row.classList.contains('isToday'))return;const dt=row.querySelector('time')?.getAttribute('datetime');if(!dt)return;const day=new Date(dt);if(day<new Date())return;li.querySelectorAll('time.label').forEach(lbl=>{const m=lbl.textContent.match(/(\d{1,2}:\d{2} [AP]M)-(\d{1,2}:\d{2} [AP]M)/);if(!m)return;const[s,e]=m.slice(1),start=new Date(`${day.toDateString()} ${s}`),end=new Date(`${day.toDateString()} ${e}`);lines.push('BEGIN:VEVENT',`UID:${Date.now()}-${Math.random().toString(36).slice(2)}@local`,`DTSTAMP:${utc(new Date())}`,`SUMMARY:${EVENT_TITLE}`,`DESCRIPTION:${lbl.textContent.trim().replace(/,/g,'\\,')}`,`DTSTART:${utc(start)}`,`DTEND:${utc(end)}`,'END:VEVENT');});});if(lines.length===4){alert('No upcoming shifts found.');return;}lines.push('END:VCALENDAR');const blob=new Blob([lines.join('\r\n')+'\r\n'],{type:'text/calendar;charset=utf-8'}),a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download=`${FILE_NAME}.ics`;a.click();window.open(CAL_REDIRECT,'_blank');})();
```